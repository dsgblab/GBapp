import{_ as w}from"./PrimaryButton-de7ee4e2.js";import{_ as b}from"./AppLayout-1a549d56.js";import{_ as k}from"./InputLabel-c163595e.js";import{_ as $}from"./TextInput-468b09ad.js";import{u as C,a as u,m as I}from"./i18n-validators-930275f1.js";import{_ as R}from"./Checkbox-59ef8d14.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{I as a,o as d,c as V,w as c,a as e,b as i,n as L,g as _,e as f,h as E,F as A,t as l}from"./app-1a102481.js";const T={setup(){return{v$:C()}},props:{current_reports:Array},components:{Checkbox:R,PrimaryButton:w,AppLayout:b,InputLabel:k,TextInput:$},validations(){return{form:{group_id:{required:u},selected:{required:u,minLength:I(1)}}}},data(){return{form:{group_id:"",selected:[]},reports:[]}},methods:{getReports(){this.v$.form.group_id.$touch(),this.v$.form.group_id.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.get(route("import-report.get-reports"),{params:{group_id:this.form.group_id}}).then(t=>{this.reports=t.data}).catch(t=>{this.$swal({icon:"error",title:"Error",text:t.response.data})})},importReports(){this.v$.form.selected.$touch(),this.v$.form.selected.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.post(route("import-report.store"),this.form).then(t=>{this.$swal({icon:"success",title:"Importación exitosa",text:"¡Los reportes seleccionados han importados correctamente!",showCancelButton:!1,confirmButtonText:"Aceptar"}),this.form={group_id:"",selected:[]},this.reports=[],this.v$.form.$reset()}).catch(t=>{this.$swal({icon:"error",title:"Error",text:t.response.data})})},checkExist(t){return this.current_reports.find(s=>s===t)!==void 0}}},N=e("div",{class:"flex flex-row"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Importación de reportes ")],-1),q={class:"py-12"},D={class:"max-w-full mx-auto sm:px-6 lg:px-8"},P={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},F={class:"p-5"},O={class:"grid grid-cols-2 gap-5"},U={class:"border-t mt-5"},z={class:"overflow-hidden border-b border-gray-200 sm:rounded-lg mt-5"},S={class:"min-w-full divide-y divide-gray-200"},j=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reporte "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dataset ")])],-1),G={class:"bg-white divide-y divide-gray-200"},H={class:"px-6 py-4 text-center text-sm font-medium"},J={class:"px-6 py-4 text-left text-sm font-medium"},K={class:"px-6 py-4 text-left text-sm font-medium"},M={class:"px-6 py-4 text-left text-sm font-medium"},Q={class:"border-t"},W={class:"p-4"};function X(t,s,Y,h,r,n){const x=a("TextInput"),p=a("font-awesome-icon"),m=a("PrimaryButton"),g=a("Checkbox"),v=a("AppLayout");return d(),V(v,{title:"Importación de reportes"},{header:c(()=>[N]),default:c(()=>[e("div",q,[e("div",D,[e("div",P,[e("div",F,[e("div",O,[e("div",null,[i(x,{modelValue:r.form.group_id,"onUpdate:modelValue":s[0]||(s[0]=o=>r.form.group_id=o),type:"text",class:L(["mt-1 block w-full",{"border-red-500":h.v$.form.group_id.$error}]),placeholder:"ID de grupo",autocomplete:"off"},null,8,["modelValue","class"])]),i(m,{onClick:n.getReports,class:"text-center"},{default:c(()=>[i(p,{icon:"search",class:"mr-2"}),_(" Consultar reportes ")]),_:1},8,["onClick"])]),e("div",U,[e("div",z,[e("table",S,[j,e("tbody",G,[(d(!0),f(A,null,E(r.reports,o=>(d(),f("tr",null,[e("td",H,[i(g,{checked:r.form.selected,"onUpdate:checked":s[1]||(s[1]=y=>r.form.selected=y),value:o,disabled:n.checkExist(o.id)},null,8,["checked","value","disabled"])]),e("td",J,l(o.name),1),e("td",K,l(o.id),1),e("td",M,l(o.datasetId),1)]))),256))])])])])]),e("div",Q,[e("div",W,[i(m,{onClick:n.importReports,class:"text-center",disabled:r.form.selected.length===0},{default:c(()=>[i(p,{icon:"download",class:"mr-2"}),_(" Importar reportes ")]),_:1},8,["onClick","disabled"])])])])])])]),_:1})}const ce=B(T,[["render",X]]);export{ce as default};
