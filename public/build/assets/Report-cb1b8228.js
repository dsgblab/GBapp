import{_ as E}from"./AppLayout-09551333.js";import{_ as L}from"./PrimaryButton-aeaef532.js";import{_ as I}from"./DangerButton-e9ba40a2.js";import{_ as A}from"./InputLabel-85ed99ea.js";import{a as P}from"./DialogModal-605fa433.js";import{_ as U}from"./Checkbox-f6ad087f.js";import{_ as S}from"./SecondaryButton-736c1d10.js";import{_ as T}from"./TextInput-9f00e42d.js";import{u as G,r as O,a as y,b as z}from"./index-9291433a.js";import{k as F,p,q as j,o,c as v,w as c,a as t,s as q,b as a,g as k,e as s,h as _,F as f,t as n,n as g,f as w}from"./app-633a0e1b.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const J={setup(){return{v$:G()}},props:{reports:Array},components:{TextInput:T,SecondaryButton:S,Checkbox:U,DialogModal:P,InputLabel:A,DangerButton:I,PrimaryButton:L,AppLayout:E,Link:F},validations(){return{modal:{form:{id:{requiredIf:O(this.modal.editMode)},name:{required:y},groupId:{required:y},report_id:{required:y},access_level:{required:y},dataset_id:{required:y},permission:{required:y,alpha:z}}}}},data(){return{records:this.reports,modal:{title:"",editMode:!1,open:!1,form:{id:"",name:"",group_id:"",report_id:"",access_level:"",dataset_id:"",permission:""}}}},methods:{create(){this.modal.open=!0,this.modal.title="Agregar reporte"},edit(r){this.modal={title:"Editar reporte",editMode:!0,open:!0,form:{id:r.id,name:r.name,group_id:r.group_id,report_id:r.report_id,access_level:r.access_level,dataset_id:r.dataset_id,permission:r.permission}}},store(){this.v$.modal.form.$touch(),this.v$.modal.form.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.post(route("report.store"),this.modal.form).then(r=>{this.closeModal(),this.records=r.data}).catch(r=>{this.$swal({icon:"error",title:"ERROR",text:r.response.data})})},update(){this.v$.modal.form.$touch(),this.v$.modal.form.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.put(route("report.update",this.modal.form.id),this.modal.form).then(r=>{this.closeModal(),this.records=r.data}).catch(r=>{this.$swal({icon:"error",title:"Error",text:r.response.data})})},destroy(r){this.$swal({icon:"question",title:"¿Eliminar reporte?",text:"¡Esta acción no es reversible!",showCancelButton:!0,confirmButtonText:"¡Si, Eliminar!"}).then(d=>{d.isConfirmed&&axios.delete(route("report.destroy",r)).then(b=>{this.records=b.data}).catch(b=>{this.$swal({icon:"error",title:"Error",text:b.response.data})})})},closeModal(){this.modal={title:"",editMode:!1,open:!1,form:{id:"",name:"",group_id:"",report_id:"",access_level:"",dataset_id:"",permission:""}},this.v$.modal.form.$reset()}}},K={class:"flex flex-row"},Q=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Reportes ",-1),W={class:"py-12"},X={class:"max-w-8xl mx-6 sm:px-6 lg:px-8"},Y={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},Z={class:"py-2 align-middle inline-block min-w-full"},ee={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},te={class:"min-w-full divide-y divide-gray-200"},oe=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Grupo "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reporte "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dataset "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nivel de acceso "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Creado por "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Permiso "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})])],-1),se={class:"bg-white divide-y divide-gray-200"},re={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},ae={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},le={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},ie={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},de={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},ne={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},me={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},ce={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium"},pe={key:1},ue=t("td",{colspan:"9",class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium text-red-500"}," No se encontraron registros… ",-1),_e=[ue],fe={class:"mt-4"},xe={key:0,class:"mt-1"},he={class:"mt-4"},ye={key:0,class:"mt-1"},ve={class:"mt-4"},ge={key:0,class:"mt-1"},we={class:"mt-4"},ke={key:0,class:"mt-1"},be={class:"mt-4"},$e={key:0,class:"mt-1"},Ve={class:"mt-4"},Ce={key:0,class:"mt-1"};function qe(r,d,b,l,i,u){const $=p("font-awesome-icon"),V=p("PrimaryButton"),R=p("Link"),B=p("SecondaryButton"),M=p("DangerButton"),x=p("InputLabel"),h=p("TextInput"),D=p("DialogModal"),N=p("AppLayout"),C=j("permission");return o(),v(N,{title:"Reportes"},{header:c(()=>[t("div",K,[Q,q((o(),v(V,{type:"button",class:"ml-auto",onClick:u.create},{default:c(()=>[a($,{icon:"plus",class:"mr-2"}),k(" Crear ")]),_:1},8,["onClick"])),[[C,"report.create"]])])]),default:c(()=>[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[t("table",te,[oe,t("tbody",se,[i.records.length>0?(o(!0),s(f,{key:0},_(i.records,e=>(o(),s("tr",null,[t("td",re,n(e.name),1),t("td",ae,n(e.group_id),1),t("td",le,n(e.report_id),1),t("td",ie,n(e.dataset_id),1),t("td",de,n(e.access_level),1),t("td",ne,n(e.user.name),1),t("td",me,n(e.permission),1),t("td",ce,[a(R,{href:r.route("report.view",[e.group_id,e.report_id]),class:"mr-2 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},{default:c(()=>[a($,{icon:["fas","arrow-up-right-from-square"]})]),_:2},1032,["href"]),q((o(),v(B,{class:"mr-2",onClick:m=>u.edit(e)},{default:c(()=>[a($,{icon:["far","pen-to-square"]})]),_:2},1032,["onClick"])),[[C,"report.edit"]]),q((o(),v(M,{onClick:m=>u.destroy(e.id)},{default:c(()=>[a($,{icon:["far","trash-can"]})]),_:2},1032,["onClick"])),[[C,"report.destroy"]])])]))),256)):(o(),s("tr",pe,_e))])])])])])])]),a(D,{show:i.modal.open,onClose:u.closeModal},{title:c(()=>[k(n(i.modal.title),1)]),content:c(()=>[t("div",fe,[a(x,{value:"Nombre"}),a(h,{modelValue:i.modal.form.name,"onUpdate:modelValue":d[0]||(d[0]=e=>i.modal.form.name=e),type:"text",class:g(["mt-1 block w-full",{"border-red-500":l.v$.modal.form.name.$error}]),required:"",autocomplete:"Nombre"},null,8,["modelValue","class"]),l.v$.modal.form.name.$error?(o(),s("ul",xe,[(o(!0),s(f,null,_(l.v$.modal.form.name.$errors,(e,m)=>(o(),s("li",{class:"text-red-500",key:m},n(e.$message),1))),128))])):w("",!0)]),t("div",he,[a(x,{value:"Grupo"}),a(h,{modelValue:i.modal.form.group_id,"onUpdate:modelValue":d[1]||(d[1]=e=>i.modal.form.group_id=e),type:"text",class:g(["mt-1 block w-full",{"border-red-500":l.v$.modal.form.group_id.$error}]),required:"",autocomplete:"Grupo"},null,8,["modelValue","class"]),l.v$.modal.form.group_id.$error?(o(),s("ul",ye,[(o(!0),s(f,null,_(l.v$.modal.form.group_id.$errors,(e,m)=>(o(),s("li",{class:"text-red-500",key:m},n(e.$message),1))),128))])):w("",!0)]),t("div",ve,[a(x,{value:"Reporte"}),a(h,{modelValue:i.modal.form.report_id,"onUpdate:modelValue":d[2]||(d[2]=e=>i.modal.form.report_id=e),type:"text",class:g(["mt-1 block w-full",{"border-red-500":l.v$.modal.form.report_id.$error}]),required:"",autocomplete:"Reporte"},null,8,["modelValue","class"]),l.v$.modal.form.report_id.$error?(o(),s("ul",ge,[(o(!0),s(f,null,_(l.v$.modal.form.report_id.$errors,(e,m)=>(o(),s("li",{class:"text-red-500",key:m},n(e.$message),1))),128))])):w("",!0)]),t("div",we,[a(x,{value:"Dataset"}),a(h,{modelValue:i.modal.form.dataset_id,"onUpdate:modelValue":d[3]||(d[3]=e=>i.modal.form.dataset_id=e),type:"text",class:g(["mt-1 block w-full",{"border-red-500":l.v$.modal.form.dataset_id.$error}]),required:"",autocomplete:"Dataset"},null,8,["modelValue","class"]),l.v$.modal.form.dataset_id.$error?(o(),s("ul",ke,[(o(!0),s(f,null,_(l.v$.modal.form.dataset_id.$errors,(e,m)=>(o(),s("li",{class:"text-red-500",key:m},n(e.$message),1))),128))])):w("",!0)]),t("div",be,[a(x,{value:"Nivel de acceso"}),a(h,{modelValue:i.modal.form.access_level,"onUpdate:modelValue":d[4]||(d[4]=e=>i.modal.form.access_level=e),type:"text",class:g(["mt-1 block w-full",{"border-red-500":l.v$.modal.form.access_level.$error}]),required:"",autocomplete:"Nivel de acceso"},null,8,["modelValue","class"]),l.v$.modal.form.access_level.$error?(o(),s("ul",$e,[(o(!0),s(f,null,_(l.v$.modal.form.access_level.$errors,(e,m)=>(o(),s("li",{class:"text-red-500",key:m},n(e.$message),1))),128))])):w("",!0)]),t("div",Ve,[a(x,{value:"Permiso"}),a(h,{modelValue:i.modal.form.permission,"onUpdate:modelValue":d[5]||(d[5]=e=>i.modal.form.permission=e),type:"text",class:g(["mt-1 block w-full",{"border-red-500":l.v$.modal.form.permission.$error}]),required:"",autocomplete:"Permiso"},null,8,["modelValue","class"]),l.v$.modal.form.permission.$error?(o(),s("ul",Ce,[(o(!0),s(f,null,_(l.v$.modal.form.permission.$errors,(e,m)=>(o(),s("li",{class:"text-red-500",key:m},n(e.$message),1))),128))])):w("",!0)])]),footer:c(()=>[a(B,{onClick:u.closeModal},{default:c(()=>[k(" Cancelar ")]),_:1},8,["onClick"]),i.modal.editMode?(o(),v(V,{key:0,class:"ml-3",onClick:u.update},{default:c(()=>[k(" Actualizar ")]),_:1},8,["onClick"])):(o(),v(V,{key:1,class:"ml-3",onClick:u.store},{default:c(()=>[k(" Guardar ")]),_:1},8,["onClick"]))]),_:1},8,["show","onClose"])]),_:1})}const Se=H(J,[["render",qe]]);export{Se as default};
