import{_ as E}from"./AppLayout-09551333.js";import{_ as V}from"./PrimaryButton-aeaef532.js";import{_ as q}from"./SecondaryButton-736c1d10.js";import{a as D}from"./DialogModal-605fa433.js";import{_ as I}from"./TextInput-9f00e42d.js";import{_ as P}from"./InputError-e117dfaa.js";import{u as L,r as N,a as A}from"./index-9291433a.js";import{_ as O}from"./InputLabel-85ed99ea.js";import{_ as S}from"./Checkbox-f6ad087f.js";import{_ as T}from"./DangerButton-e9ba40a2.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{p as r,q as F,o as t,c as d,w as a,a as e,s as w,b as l,g as u,e as i,h as v,F as k,t as m,n as G,f as U}from"./app-633a0e1b.js";const j={setup(){return{v$:L()}},components:{DangerButton:T,Checkbox:S,InputLabel:O,InputError:P,TextInput:I,PrimaryButton:V,SecondaryButton:q,AppLayout:E,DialogModal:D},props:{permissions:Array},validations(){return{modal:{form:{id:{requiredIf:N(this.modal.editMode)},name:{required:A}}}}},data(){return{records:this.permissions,modal:{title:"",editMode:!1,open:!1,form:{id:"",name:""}}}},methods:{create(){this.modal.open=!0,this.modal.title="Crear Permiso"},edit(o){this.modal={title:"Editar Permiso",editMode:!0,open:!0,form:{id:o.id,name:o.name}}},store(){this.v$.modal.form.$touch(),this.v$.modal.form.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.post(route("permissions.store"),this.modal.form).then(o=>{this.closeModal(),this.records=o.data}).catch(o=>{this.$swal({icon:"error",title:"ERROR",text:o.response.data})})},update(){this.v$.modal.form.$touch(),this.v$.modal.form.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.put(route("permissions.update",this.modal.form.id),this.modal.form).then(o=>{this.closeModal(),this.records=o.data}).catch(o=>{this.$swal({icon:"error",title:"ERROR",text:o.response.data})})},destroy(o){this.$swal({icon:"question",title:"¿Eliminar Permiso?",text:"¡Esta acción no es reversible!",showCancelButton:!0,confirmButtonText:"¡Si, Eliminar!"}).then(_=>{_.isConfirmed&&axios.delete(route("permissions.destroy",o)).then(f=>{this.records=f.data}).catch(f=>{this.$swal({icon:"error",title:"ERROR",text:f.response.data})})})},closeModal(){this.modal={title:"",editMode:!1,open:!1,form:{id:"",name:""}},this.v$.modal.form.$reset()}}},H={class:"flex flex-row"},J=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Permisos ",-1),K={class:"py-12"},Q={class:"max-w-8xl mx-6 sm:px-6 lg:px-8"},W={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},X={class:"py-2 align-middle inline-block min-w-full"},Y={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},Z={class:"min-w-full divide-y divide-gray-200"},ee=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Roles asociados "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Creado el "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actualizado el "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})])],-1),te={class:"bg-white divide-y divide-gray-200"},oe={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},se={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},ae={class:"text-xs font-semibold inline-block py-1 px-2 rounded text-indigo-600 bg-indigo-200 uppercase last:mr-0 mr-1"},re={key:1,class:"text-xs font-semibold inline-block py-1 px-2 rounded text-red-600 bg-red-200 uppercase last:mr-0 mr-1"},ie={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},ne={class:"px-6 py-4 whitespace-nowrap text-left text-sm font-medium"},le={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium"},ce={class:"mt-4"},de={key:0,class:"mt-1"};function me(o,_,f,x,c,n){const h=r("font-awesome-icon"),y=r("PrimaryButton"),b=r("SecondaryButton"),C=r("DangerButton"),$=r("InputLabel"),R=r("TextInput"),B=r("DialogModal"),M=r("AppLayout"),g=F("permission");return t(),d(M,{title:"Permisos"},{header:a(()=>[e("div",H,[J,w((t(),d(y,{type:"button",class:"ml-auto",onClick:n.create},{default:a(()=>[l(h,{icon:"plus",class:"mr-2"}),u(" Crear ")]),_:1},8,["onClick"])),[[g,"permission.create"]])])]),default:a(()=>[e("div",K,[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("table",Z,[ee,e("tbody",te,[(t(!0),i(k,null,v(c.records,s=>(t(),i("tr",null,[e("td",oe,m(s.name),1),e("td",se,[s.roles.length>0?(t(!0),i(k,{key:0},v(s.roles,(p,pe)=>(t(),i("span",ae,m(p.name),1))),256)):(t(),i("span",re," sin roles asociados "))]),e("td",ie,m(s.created_at),1),e("td",ne,m(s.updated_at),1),e("td",le,[w((t(),d(b,{class:"mr-2",onClick:p=>n.edit(s)},{default:a(()=>[l(h,{icon:["far","pen-to-square"]})]),_:2},1032,["onClick"])),[[g,"permission.edit"]]),w((t(),d(C,{onClick:p=>n.destroy(s.id)},{default:a(()=>[l(h,{icon:["far","trash-can"]})]),_:2},1032,["onClick"])),[[g,"permission.destroy"]])])]))),256))])])])])])])]),l(B,{show:c.modal.open,onClose:n.closeModal},{title:a(()=>[u(m(c.modal.title),1)]),content:a(()=>[e("div",ce,[l($,{value:"Nombre"}),l(R,{modelValue:c.modal.form.name,"onUpdate:modelValue":_[0]||(_[0]=s=>c.modal.form.name=s),type:"text",class:G(["mt-1 block w-full",{"border-red-500":x.v$.modal.form.name.$error}]),required:"",autocomplete:"Nombre"},null,8,["modelValue","class"]),x.v$.modal.form.name.$error?(t(),i("ul",de,[(t(!0),i(k,null,v(x.v$.modal.form.name.$errors,(s,p)=>(t(),i("li",{class:"text-red-500",key:p},m(s.$message),1))),128))])):U("",!0)])]),footer:a(()=>[l(b,{onClick:n.closeModal},{default:a(()=>[u(" Cancelar ")]),_:1},8,["onClick"]),c.modal.editMode?(t(),d(y,{key:0,class:"ml-3",onClick:n.update},{default:a(()=>[u(" Actualizar ")]),_:1},8,["onClick"])):(t(),d(y,{key:1,class:"ml-3",onClick:n.store},{default:a(()=>[u(" Guardar ")]),_:1},8,["onClick"]))]),_:1},8,["show","onClose"])]),_:1})}const $e=z(j,[["render",me]]);export{$e as default};
