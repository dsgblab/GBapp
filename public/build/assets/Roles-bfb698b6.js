import{_ as V}from"./AppLayout-96913770.js";import{_ as D}from"./PrimaryButton-cb2f26f0.js";import{_ as q}from"./SecondaryButton-42b316c0.js";import{a as A}from"./DialogModal-4288a7d8.js";import{_ as N}from"./TextInput-b7f89cd6.js";import{_ as O}from"./InputError-66ef2e6b.js";import{u as P,r as S,a as $,m as T}from"./i18n-validators-e03af2ab.js";import{_ as z}from"./InputLabel-d32849fe.js";import{_ as F}from"./Checkbox-4694c41f.js";import{_ as U}from"./DangerButton-09a25b27.js";import{_ as G}from"./CustomButton-23b12624.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";import{I as l,L as H,o as t,c as p,w as r,a as e,D as C,b as n,g as x,e as a,h,F as y,t as d,n as J,f as R}from"./app-4e8260f1.js";const K={setup(){return{v$:P()}},components:{CustomButton:G,DangerButton:U,Checkbox:F,InputLabel:z,InputError:O,TextInput:N,PrimaryButton:D,SecondaryButton:q,AppLayout:V,DialogModal:A},props:{roles:Array,permissions:Array},validations(){return{modal:{form:{id:{requiredIf:S(this.modal.editMode)},name:{required:$},permissions:{required:$,minLength:T(1)}}}}},data(){return{records:this.roles,modal:{title:"",editMode:!1,open:!1,form:{id:"",name:"",permissions:[]}}}},methods:{create(){this.modal.open=!0,this.modal.title="Crear Rol"},edit(s){this.modal={title:"Editar Rol",editMode:!0,open:!0,form:{id:s.id,name:s.name,permissions:s.permissions.map(m=>m.name)}}},store(){this.v$.modal.form.$touch(),this.v$.modal.form.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.post(route("roles.store"),this.modal.form).then(s=>{this.closeModal(),this.records=s.data}).catch(s=>{this.$swal({icon:"error",title:"ERROR",text:s.response.data})})},update(){this.v$.modal.form.$touch(),this.v$.modal.form.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.put(route("roles.update",this.modal.form.id),this.modal.form).then(s=>{this.closeModal(),this.records=s.data}).catch(s=>{this.$swal({icon:"error",title:"ERROR",text:s.response.data})})},destroy(s){this.$swal({icon:"question",title:"¿Eliminar Rol?",text:"¡Esta acción no es reversible!",showCancelButton:!0,confirmButtonText:"¡Si, Eliminar!"}).then(m=>{m.isConfirmed&&axios.delete(route("roles.destroy",s)).then(_=>{this.records=_.data}).catch(_=>{this.$swal({icon:"error",title:"ERROR",text:_.response.data})})})},closeModal(){this.modal={title:"",editMode:!1,open:!1,form:{id:"",name:"",permissions:[]}},this.v$.modal.form.$reset()}}},Q={class:"flex flex-row"},W=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Roles ",-1),X={class:"py-12"},Y={class:"max-w-8xl mx-6 sm:px-6 lg:px-8"},Z={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},ee={class:"py-2 align-middle inline-block min-w-full"},te={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},oe={class:"min-w-full divide-y divide-gray-200"},se=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Permisos asociados "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Creado el "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actualizado el ")])],-1),ae={class:"bg-white divide-y divide-gray-200"},re={class:"px-6 py-4 text-center text-sm font-medium"},ie={class:"flex flex-row"},le={class:"px-6 py-4 text-left text-sm font-medium"},ne={class:"px-6 py-4 text-left text-sm font-medium"},me={class:"text-xs font-semibold inline-block py-1 px-2 rounded text-indigo-600 bg-indigo-200 uppercase last:mr-0 mr-1"},ce={class:"px-6 py-4 text-left text-sm font-medium"},de={class:"px-6 py-4 text-left text-sm font-medium"},ue={class:"mt-4"},pe={key:0,class:"mt-1"},_e={class:"mt-4"},fe={class:"grid grid-cols-3 gap-5 mt-2"},xe={class:"flex items-center"},he={class:"ml-2"},ye={key:0,class:"mt-1"};function ve(s,m,_,f,c,u){const v=l("font-awesome-icon"),g=l("PrimaryButton"),b=l("CustomButton"),w=l("InputLabel"),B=l("TextInput"),M=l("Checkbox"),E=l("SecondaryButton"),I=l("DialogModal"),L=l("AppLayout"),k=H("permission");return t(),p(L,{title:"Roles"},{header:r(()=>[e("div",Q,[W,C((t(),p(g,{type:"button",class:"ml-auto",onClick:u.create},{default:r(()=>[n(v,{icon:"plus",class:"mr-2"}),x(" Crear ")]),_:1},8,["onClick"])),[[k,"role.create"]])])]),default:r(()=>[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("table",oe,[se,e("tbody",ae,[(t(!0),a(y,null,h(c.records,o=>(t(),a("tr",null,[e("td",re,[e("div",ie,[C((t(),p(b,{class:"mr-2",onClick:i=>u.edit(o)},{default:r(()=>[n(v,{icon:["far","pen-to-square"]})]),_:2},1032,["onClick"])),[[k,"role.edit"]]),C((t(),p(b,{onClick:i=>u.destroy(o.id)},{default:r(()=>[n(v,{icon:["far","trash-can"]})]),_:2},1032,["onClick"])),[[k,"role.destroy"]])])]),e("td",le,d(o.name),1),e("td",ne,[(t(!0),a(y,null,h(o.permissions,(i,ge)=>(t(),a("span",me,d(i.name),1))),256))]),e("td",ce,d(o.created_at),1),e("td",de,d(o.updated_at),1)]))),256))])])])])])])]),n(I,{show:c.modal.open,onClose:u.closeModal},{title:r(()=>[x(d(c.modal.title),1)]),content:r(()=>[e("div",ue,[n(w,{value:"Nombre"}),n(B,{modelValue:c.modal.form.name,"onUpdate:modelValue":m[0]||(m[0]=o=>c.modal.form.name=o),type:"text",class:J(["mt-1 block w-full",{"border-red-500":f.v$.modal.form.name.$error}]),required:"",autocomplete:"Nombre"},null,8,["modelValue","class"]),f.v$.modal.form.name.$error?(t(),a("ul",pe,[(t(!0),a(y,null,h(f.v$.modal.form.name.$errors,(o,i)=>(t(),a("li",{class:"text-red-500",key:i},d(o.$message),1))),128))])):R("",!0)]),e("div",_e,[n(w,{value:"Permisos Disponibles"}),e("div",fe,[(t(!0),a(y,null,h(_.permissions,o=>(t(),a("div",xe,[n(M,{checked:c.modal.form.permissions,"onUpdate:checked":m[1]||(m[1]=i=>c.modal.form.permissions=i),value:o.name},null,8,["checked","value"]),e("div",he,d(o.name),1)]))),256))]),f.v$.modal.form.permissions.$error?(t(),a("ul",ye,[(t(!0),a(y,null,h(f.v$.modal.form.permissions.$errors,(o,i)=>(t(),a("li",{class:"text-red-500",key:i},d(o.$message),1))),128))])):R("",!0)])]),footer:r(()=>[n(E,{onClick:u.closeModal},{default:r(()=>[x(" Cancelar ")]),_:1},8,["onClick"]),c.modal.editMode?(t(),p(g,{key:0,class:"ml-3",onClick:u.update},{default:r(()=>[x(" Actualizar ")]),_:1},8,["onClick"])):(t(),p(g,{key:1,class:"ml-3",onClick:u.store},{default:r(()=>[x(" Guardar ")]),_:1},8,["onClick"]))]),_:1},8,["show","onClose"])]),_:1})}const qe=j(K,[["render",ve]]);export{qe as default};
